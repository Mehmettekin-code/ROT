<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CS Scripter</title>
<style>
    body {
        margin: 0;
        font-family: Arial, sans-serif;
        background: #0a0a0a;
        color: white;
    }

    /* Yükleme ekranı */
    #loading {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        height: 100vh;
        background: black;
        font-size: 1.5rem;
    }
    .spinner {
        border: 5px solid rgba(255,255,255,0.1);
        border-top: 5px solid #00ffcc;
        border-radius: 50%;
        width: 60px;
        height: 60px;
        animation: spin 1s linear infinite;
        margin-bottom: 15px;
    }
    @keyframes spin {
        100% { transform: rotate(360deg); }
    }

    /* Bot doğrulama */
    #captcha {
        display: none;
        height: 100vh;
        background: #111;
        align-items: center;
        justify-content: center;
        flex-direction: column;
    }
    .captcha-box {
        background: #1a1a1a;
        padding: 20px;
        border-radius: 10px;
        text-align: center;
        box-shadow: 0 0 15px #00ffcc;
    }
    .captcha-code {
        font-size: 2rem;
        letter-spacing: 5px;
        margin-bottom: 15px;
        color: #00ffcc;
    }
    input {
        padding: 8px;
        border-radius: 5px;
        border: none;
        margin-bottom: 10px;
        text-align: center;
    }
    .btn {
        padding: 10px 20px;
        background: #00ffcc;
        border: none;
        cursor: pointer;
        border-radius: 5px;
        color: black;
        font-weight: bold;
    }
    .btn:hover {
        background: #00ccaa;
    }

    /* Ana içerik */
    #main {
        display: none;
        padding: 20px;
    }
    .search-box {
        margin-bottom: 20px;
    }
    .search-box input {
        width: 100%;
        padding: 10px;
        border-radius: 5px;
        border: none;
    }
    .script-item {
        background: #1a1a1a;
        padding: 15px;
        border-radius: 10px;
        margin-bottom: 10px;
        box-shadow: 0 0 10px #00ffcc;
    }
    .script-item h3 {
        margin: 0;
        color: #00ffcc;
    }
    .script-item pre {
        background: black;
        padding: 10px;
        border-radius: 5px;
        overflow-x: auto;
    }
</style>
</head>
<body>

<!-- Yükleme ekranı -->
<div id="loading">
    <div class="spinner"></div>
    <div id="loadingText">Bağlantınız kontrol ediliyor...</div>
</div>

<!-- Bot doğrulama -->
<div id="captcha">
    <div class="captcha-box">
        <div class="captcha-code" id="captchaCode"></div>
        <input type="text" id="captchaInput" placeholder="Kodu buraya gir">
        <br>
        <button class="btn" onclick="checkCaptcha()">Doğrula</button>
    </div>
</div>

<!-- Ana içerik -->
<div id="main">
    <h1>CS Scripter</h1>
    <div class="search-box">
        <input type="text" id="search" placeholder="Script ara..." onkeyup="searchScripts()">
    </div>
    <div id="scriptList">Yükleniyor...</div>
</div>

<script>
    // Ping ölçümü
    let startPing = Date.now();
    fetch(window.location.href).then(() => {
        let ping = Date.now() - startPing;
        document.getElementById("loadingText").innerText = `Ping: ${ping} ms`;
        setTimeout(() => {
            document.getElementById("loading").style.display = "none";
            startCaptcha();
        }, ping < 300 ? 1500 : 3000);
    });

    // Captcha başlat
    function startCaptcha() {
        document.getElementById("captcha").style.display = "flex";
        let chars = "ABCDEFGHJKLMNPQRSTUVWXYZ23456789";
        let code = "";
        for (let i = 0; i < 6; i++) {
            code += chars.charAt(Math.floor(Math.random() * chars.length));
        }
        document.getElementById("captchaCode").innerText = code;
        window.generatedCode = code;
    }

    // Captcha kontrol
    function checkCaptcha() {
        let val = document.getElementById("captchaInput").value.toUpperCase();
        if (val === window.generatedCode) {
            document.getElementById("captcha").style.display = "none";
            document.getElementById("main").style.display = "block";
            loadScripts();
        } else {
            alert("Kod yanlış, tekrar deneyin.");
        }
    }

    // ScriptBlox API'den veri çek (CORS Proxy ile)
    function loadScripts() {
        let url = "https://scriptblox.com/api/script/search?q=";
        fetch("https://api.allorigins.win/raw?url=" + encodeURIComponent(url))
            .then(res => res.json())
            .then(data => {
                let container = document.getElementById("scriptList");
                container.innerHTML = "";
                data.result.scripts.forEach(script => {
                    let div = document.createElement("div");
                    div.className = "script-item";
                    div.innerHTML = `<h3>${script.title}</h3>
                                     <p>${script.game ? script.game.name : ""}</p>
                                     <pre>${script.script || "Kod bulunamadı"}</pre>`;
                    container.appendChild(div);
                });
            })
            .catch(err => {
                document.getElementById("scriptList").innerText = "Scriptler yüklenemedi.";
            });
    }

    // Arama filtresi
    function searchScripts() {
        let input = document.getElementById("search").value.toLowerCase();
        let items = document.querySelectorAll(".script-item");
        items.forEach(item => {
            item.style.display = item.innerText.toLowerCase().includes(input) ? "block" : "none";
        });
    }
</script>

</body>
</html>
